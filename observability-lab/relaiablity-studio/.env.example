# üîí SECURITY CRITICAL: All variables must be set in production

# ============================================================================
# üîê JWT & AUTHENTICATION (REQUIRED)
# ============================================================================

# JWT Secret for signing tokens - MUST be long and random!
# Generate with: openssl rand -base64 32
# Minimum 32 characters, recommended 64+ characters
JWT_SECRET=your-long-random-jwt-secret-minimum-32-characters-required-change-me

# Environment mode: development | production
# Controls security features (HTTPS enforcement, CORS strictness, etc.)
ENV=production

# ============================================================================
# üóÑÔ∏è DATABASE CONFIGURATION (REQUIRED)
# ============================================================================

DB_HOST=postgres
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=change-me-strong-password
DB_NAME=reliability_studio
DB_SSLMODE=disable

# ============================================================================
# üåê CORS CONFIGURATION (REQUIRED)
# ============================================================================

# Allowed origins for CORS (comma-separated list, NO WILDCARDS!)
# Examples: https://example.com,https://app.example.com
# Production: Use your actual domain(s)
# Development: http://localhost:3000,http://localhost:4000
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:4000

# ============================================================================
# üîó EXTERNAL SERVICES (REQUIRED)
# ============================================================================

# Prometheus metrics endpoint
PROMETHEUS_URL=http://prometheus:9090

# Loki logs endpoint
LOKI_URL=http://loki:3100

# Tempo traces endpoint
TEMPO_URL=http://tempo:3200

# Kubernetes API endpoint (optional)
# Leave empty if K8s integration not needed
K8S_API_URL=https://kubernetes.default.svc.cluster.local

# ============================================================================
# üîê HTTPS/TLS CONFIGURATION (REQUIRED for production)
# ============================================================================

# Path to TLS certificate file
# Example: /etc/certs/server.crt
# Leave empty for HTTP-only (development only!)
TLS_CERT_PATH=/etc/certs/server.crt

# Path to TLS private key file
# Example: /etc/certs/server.key
# Leave empty for HTTP-only (development only!)
TLS_KEY_PATH=/etc/certs/server.key

# ============================================================================
# üìä APPLICATION CONFIGURATION
# ============================================================================

PORT=9000
LOG_LEVEL=info

# ============================================================================
# üöÄ RATE LIMITING
# ============================================================================

# Maximum requests per minute per IP address
RATE_LIMIT_PER_MINUTE=100

# ============================================================================
# ‚ö° DATABASE TUNING
# ============================================================================

DB_MAX_OPEN_CONNS=50
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME_MINUTES=30

# ============================================================================
# ‚è≤Ô∏è  SLO CALCULATION
# ============================================================================

SLO_CALCULATION_INTERVAL_MINUTES=5

# ============================================================================
# üîß FEATURE FLAGS
# ============================================================================

ENABLE_KUBERNETES_INTEGRATION=true
ENABLE_AUTHENTICATION=true

# ============================================================================
# ü©∫ DEVELOPMENT SETTINGS (Disable in production)
# ============================================================================

DEBUG=false
ENABLE_PPROF=false

# ============================================================================
# ‚ö†Ô∏è  SECURITY REQUIREMENTS ‚ö†Ô∏è
# ============================================================================

# 1. JWT_SECRET RULES:
#    ‚úÖ Minimum 32 characters
#    ‚úÖ Randomly generated (openssl rand -base64 32)
#    ‚úÖ Unique per environment
#    ‚úÖ Changed after initial deployment
#    ‚úÖ Never committed to git
#    ‚úÖ Rotated every 90 days minimum
#    ‚ùå Never use default/example values in production

# 2. Database Password RULES:
#    ‚úÖ Minimum 12 characters
#    ‚úÖ Mixed case letters (A-Z, a-z)
#    ‚úÖ Numbers (0-9)
#    ‚úÖ Special characters (!@#$%^&*)
#    ‚úÖ Changed from defaults
#    ‚úÖ Limited database privileges
#    ‚úÖ Rotated every 90 days minimum
#    ‚ùå Never use 'postgres' or 'password'

# 3. CORS_ALLOWED_ORIGINS RULES:
#    ‚úÖ Explicit domain list only
#    ‚úÖ HTTPS URLs in production
#    ‚úÖ No wildcard domains (*)
#    ‚úÖ Minimum required domains
#    ‚ùå Never use localhost:* patterns
#    ‚ùå Never use wildcards

# 4. TLS Certificate RULES (Production):
#    ‚úÖ Valid certificate from trusted CA
#    ‚úÖ Not self-signed in production
#    ‚úÖ Expires at least 30 days in future
#    ‚úÖ Rotated before expiration
#    ‚úÖ File permissions 0600 (private key)
#    ‚úÖ File permissions 0644 (certificate)
#    ‚ùå Never expose private key

# 5. General Security Rules:
#    ‚úÖ All secrets must be environment variables
#    ‚úÖ No secrets in code or config files
#    ‚úÖ Audit log all authentication events
#    ‚úÖ Monitor failed login attempts
#    ‚úÖ Rotate secrets every 90 days
#    ‚úÖ Use strong passwords (12+ chars)
#    ‚ùå Never log sensitive data
#    ‚ùå Never hardcode credentials

# ============================================================================
# üöÄ QUICK START (Development)
# ============================================================================
# 
# 1. Generate JWT secret:
#    openssl rand -base64 32
#
# 2. Copy this file:
#    cp .env.example .env
#
# 3. Update values in .env with your settings
#
# 4. Start the application:
#    docker-compose up
#
# ============================================================================
